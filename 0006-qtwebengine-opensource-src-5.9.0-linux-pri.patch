From c509c48670c74b4b29be32f9d6d8ca7687ffd340 Mon Sep 17 00:00:00 2001
From: Helio Chissini de Castro <helio@kde.org>
Date: Wed, 31 May 2017 15:13:15 +0200
Subject: [PATCH] qtwebengine-opensource-src-5.9.0-linux-pri

---
 src/core/config/linux.pri | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/src/core/config/linux.pri b/src/core/config/linux.pri
index 24951cd07..c28e3b312 100644
--- a/src/core/config/linux.pri
+++ b/src/core/config/linux.pri
@@ -147,4 +147,16 @@ host_build {
     use?(system_icu):      gn_args += use_system_icu=true icu_use_data_file=false
     use?(system_ffmpeg):   gn_args += use_system_ffmpeg=true
     #use?(system_protobuf): gn_args += use_system_protobuf=true
+
+    # some more system packages, that are not checked for for some reason
+    gn_args += use_system_re2=true
+
+    # yasm is only used on x86, and passing use_system_yasm makes the build fail on
+    # other architectures (e.g., ARM), so make it conditional on the architecture
+    contains(QT_ARCH, "x86_64")|contains(QT_ARCH, "i386") {
+        gn_args += use_system_yasm=true
+    }
+
+    #link libpci instead of dlopening it, our Qt packaging depends on it anyway
+    gn_args += linux_link_libpci=true
 }
-- 
2.13.0

